# æ•™æˆå¡ç‰‡å…³è”æ˜¾ç¤ºåŠŸèƒ½å®ç°

## ğŸ¯ åŠŸèƒ½éœ€æ±‚
ç”¨æˆ·å¸Œæœ›æ¯æ¬¡æ–°é—®é¢˜çš„æ•™æˆå¡ç‰‡æ˜¾ç¤ºåœ¨å¯¹åº”å›ç­”çš„ä¸‹é¢ï¼Œå½¢æˆï¼š
```
é—®é¢˜1 â†’ å›ç­”1 â†’ æ•™æˆå¡ç‰‡1 â†’ é—®é¢˜2 â†’ å›ç­”2 â†’ æ•™æˆå¡ç‰‡2
```

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. æ•°æ®ç»“æ„è°ƒæ•´
**ä¹‹å‰**: å…¨å±€ `teacherCards` æ•°ç»„å­˜å‚¨æ‰€æœ‰æ•™æˆå¡ç‰‡
```javascript
data: {
  messages: [],
  teacherCards: [] // å…¨å±€æ•™æˆå¡ç‰‡
}
```

**ç°åœ¨**: æ¯ä¸ªåŠ©æ‰‹æ¶ˆæ¯åŒ…å«è‡ªå·±çš„æ•™æˆå¡ç‰‡
```javascript
data: {
  messages: [
    {
      id: '1',
      type: 'assistant',
      content: 'å›ç­”å†…å®¹',
      teacherCards: [] // è¯¥å›ç­”å¯¹åº”çš„æ•™æˆå¡ç‰‡
    }
  ]
}
```

### 2. WXMLç»“æ„é‡æ„
**ä¹‹å‰**: æ¶ˆæ¯å’Œæ•™æˆå¡ç‰‡åˆ†ç¦»æ˜¾ç¤º
```xml
<!-- æ‰€æœ‰æ¶ˆæ¯ -->
<view wx:for="{{messages}}">...</view>
<!-- æ‰€æœ‰æ•™æˆå¡ç‰‡ -->
<view wx:for="{{teacherCards}}">...</view>
```

**ç°åœ¨**: æ¶ˆæ¯å’Œæ•™æˆå¡ç‰‡å…³è”æ˜¾ç¤º
```xml
<view wx:for="{{messages}}" class="message-container">
  <!-- æ¶ˆæ¯å†…å®¹ -->
  <view class="message">{{item.content}}</view>
  
  <!-- è¯¥æ¶ˆæ¯å¯¹åº”çš„æ•™æˆå¡ç‰‡ -->
  <view wx:if="{{item.teacherCards}}" class="message-teachers">
    <view wx:for="{{item.teacherCards}}" wx:for-item="teacher">
      <!-- æ•™æˆå¡ç‰‡å†…å®¹ -->
    </view>
  </view>
</view>
```

### 3. æ ¸å¿ƒé€»è¾‘ä¿®æ”¹

#### æ¶ˆæ¯åˆ›å»º
```javascript
const assistantMessage = {
  id: (Date.now() + 1).toString(),
  type: 'assistant',
  content: res.message,
  teacherCards: [] // åˆå§‹åŒ–æ•™æˆå¡ç‰‡æ•°ç»„
};
```

#### æ•™æˆå¡ç‰‡å…³è”
```javascript
async showTeacherRecommendations(apiResponse, messageId) {
  // å¤„ç†æ•™æˆæ•°æ®...
  const teachers = [...];
  
  // æ‰¾åˆ°å¯¹åº”æ¶ˆæ¯å¹¶æ›´æ–°æ•™æˆå¡ç‰‡
  const messages = [...this.data.messages];
  const messageIndex = messages.findIndex(msg => msg.id === messageId);
  messages[messageIndex].teacherCards = teachers;
  
  this.setData({ messages });
}
```

#### è¾…åŠ©æ–¹æ³•
```javascript
// è·å–æ‰€æœ‰æ•™æˆå¡ç‰‡ï¼ˆç”¨äºæœç´¢ã€åˆ†äº«ç­‰åŠŸèƒ½ï¼‰
getAllTeacherCards() {
  const allTeachers = [];
  this.data.messages.forEach(message => {
    if (message.teacherCards && message.teacherCards.length > 0) {
      allTeachers.push(...message.teacherCards);
    }
  });
  return allTeachers;
}
```

## ğŸ¨ æ ·å¼è°ƒæ•´

### æ–°å¢CSSç±»
```css
/* æ¶ˆæ¯å®¹å™¨ - åŒ…å«æ¶ˆæ¯å’Œå¯¹åº”çš„æ•™æˆå¡ç‰‡ */
.message-container {
  width: 100%;
  margin-bottom: 20rpx;
}

/* è¯¥æ¶ˆæ¯å¯¹åº”çš„æ•™å¸ˆå¡ç‰‡å®¹å™¨ */
.message-teachers {
  margin-top: 20rpx;
  padding-left: 30rpx;
  padding-right: 30rpx;
}
```

## ğŸ“± ç”¨æˆ·ä½“éªŒ

### æ˜¾ç¤ºæ•ˆæœ
```
ğŸ‘¤ ç”¨æˆ·ï¼šæ¨èä¸€äº›AIæ–¹å‘çš„æ•™æˆ
ğŸ¤– åŠ©æ‰‹ï¼šä»¥ä¸‹æ˜¯AIæ–¹å‘çš„ä¼˜ç§€æ•™æˆæ¨è...
    ğŸ“‹ [å¼ ä¸‰æ•™æˆ - äººå·¥æ™ºèƒ½]
    ğŸ“‹ [æå››æ•™æˆ - æœºå™¨å­¦ä¹ ]

ğŸ‘¤ ç”¨æˆ·ï¼šæœ‰æ²¡æœ‰è®¡ç®—æœºè§†è§‰çš„ä¸“å®¶ï¼Ÿ
ğŸ¤– åŠ©æ‰‹ï¼šä¸ºæ‚¨æ¨èè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„ä¸“å®¶...
    ğŸ“‹ [ç‹äº”æ•™æˆ - è®¡ç®—æœºè§†è§‰]
    ğŸ“‹ [èµµå…­æ•™æˆ - å›¾åƒå¤„ç†]
```

### åŠŸèƒ½ä¼˜åŠ¿
- âœ… **å…³è”æ¸…æ™°**: æ¯ä¸ªå›ç­”çš„æ•™æˆæ¨èç´§è·Ÿåœ¨å›ç­”åé¢
- âœ… **ä¸Šä¸‹æ–‡æ˜ç¡®**: ç”¨æˆ·çŸ¥é“å“ªäº›æ•™æˆæ˜¯é’ˆå¯¹å“ªä¸ªé—®é¢˜æ¨èçš„
- âœ… **å†å²ä¿æŒ**: æ‰€æœ‰é—®ç­”å’Œæ•™æˆæ¨èéƒ½ä¿æŒåœ¨å¯¹è¯å†å²ä¸­
- âœ… **å…¼å®¹ç°æœ‰åŠŸèƒ½**: é€‰æ‹©ã€å¤åˆ¶ã€åˆ†äº«åŠŸèƒ½æ­£å¸¸å·¥ä½œ

## ğŸ”„ å‘åå…¼å®¹

å¤„ç†æ—§ç‰ˆæœ¬ä¼šè¯æ•°æ®ï¼š
```javascript
// åŠ è½½ä¼šè¯æ—¶è‡ªåŠ¨é€‚é…æ—§æ ¼å¼
if (conversation.teacherCards) {
  // å°†æ—§çš„å…¨å±€æ•™æˆå¡ç‰‡è¿ç§»åˆ°æœ€åä¸€æ¡åŠ©æ‰‹æ¶ˆæ¯
  const lastMessage = conversation.messages[conversation.messages.length - 1];
  if (lastMessage && lastMessage.type === 'assistant') {
    lastMessage.teacherCards = conversation.teacherCards;
  }
}
```

ç°åœ¨æ•™æˆå¡ç‰‡ä¼šæŒ‰ç…§å¯¹è¯é¡ºåºæ˜¾ç¤ºåœ¨å¯¹åº”çš„å›ç­”ä¸‹é¢ï¼
