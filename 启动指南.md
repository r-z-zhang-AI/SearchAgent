 # 🚀 浙江大学智能科研匹配Agent - 小程序启动指南

## 当前状态

✅ **后端服务器**: 运行在 http://localhost:5000
✅ **数据库**: SQLite数据库已初始化，包含测试数据
✅ **小程序**: 微信小程序，需要微信开发者工具运行

## 快速启动

### 1. 启动后端服务器

```bash
# 在项目根目录执行
npm run server
```

### 2. 启动小程序

1. **下载微信开发者工具**
   - 访问 https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
   - 下载并安装微信开发者工具

2. **导入项目**
   - 打开微信开发者工具
   - 选择"导入项目"
   - 选择项目根目录
   - 输入小程序AppID（或选择测试号）

3. **预览调试**
   - 在开发者工具中预览小程序
   - 可以在模拟器中测试功能
   - 也可以扫码在真机上预览

## 访问应用

- **小程序**: 在微信开发者工具中运行
- **后端API**: http://localhost:5000
- **健康检查**: http://localhost:5000/api/health

## 功能测试

### 1. 小程序功能测试
在小程序聊天界面输入：
```
我需要人工智能方面的专家进行技术合作
```

### 2. 后端API测试
```bash
# 测试健康检查
curl http://localhost:5000/api/health

# 测试教授列表
curl http://localhost:5000/api/professors

# 测试聊天功能
curl -X POST http://localhost:5000/api/chat/message \
  -H "Content-Type: application/json" \
  -d '{"message": "我需要人工智能方面的专家", "conversationId": "test-123"}'
```

## 配置说明

### 环境变量
配置 `config.env` 文件：

```bash
# DeepSeek API密钥（必需）
DEEPSEEK_API_KEY=your-deepseek-api-key
DEEPSEEK_BASE_URL=https://api.deepseek.com

# 服务器端口（可选，默认5000）
PORT=5000
```

### 获取DeepSeek API密钥
1. 访问 [DeepSeek](https://platform.deepseek.com/)
2. 注册并登录账号
3. 创建API密钥
4. 将密钥填入 `config.env` 文件

## 项目结构

```
├── server/                 # 后端代码
│   ├── index.js           # 服务器入口
│   ├── routes/            # API路由
│   ├── services/          # 业务逻辑
│   └── data/              # 数据库文件
├── pages/                 # 小程序页面
│   ├── chat/              # 聊天页面
│   └── professor/         # 教授列表页面
├── images/                # 小程序图标资源
├── app.js                 # 小程序入口文件
├── app.json               # 小程序配置文件
├── app.wxss               # 小程序全局样式
├── project.config.json    # 微信开发者工具配置
├── prd.md                 # 产品需求文档
└── README.md              # 项目说明
```

## 开发说明

### 当前功能
- ✅ 小程序聊天界面
- ✅ 意图解析（DeepSeek API）
- ✅ 教授匹配算法
- ✅ 测试数据（3位教授）
- ✅ 小程序TabBar导航

### 待完善功能
- 🔄 小程序图标文件
- 🔄 更丰富的教授数据
- 🔄 用户管理系统
- 🔄 数据管理后台

## 故障排除

### 1. 端口被占用
```bash
# 查找占用端口的进程
netstat -ano | findstr :5000
netstat -ano | findstr :3000

# 终止进程
taskkill /PID <进程ID> /F
```

### 2. 数据库错误
```bash
# 重新初始化数据库
node server/init.js
```

### 3. 小程序启动失败
- 检查微信开发者工具是否正确安装
- 确认项目目录选择正确
- 检查 `project.config.json` 配置

### 4. API密钥问题
确保在 `config.env` 文件中正确配置了 `DEEPSEEK_API_KEY`

## 下一步计划

1. **添加小程序图标** - 创建TabBar所需的图标文件
2. **配置API密钥** - 获取DeepSeek API密钥并配置
3. **导入真实数据** - 将您的教授数据导入系统
4. **功能优化** - 根据使用情况优化匹配算法
5. **小程序发布** - 申请小程序账号并发布上线

---

🎉 **恭喜！您的智能科研匹配小程序已经成功搭建完成！**

现在可以在微信开发者工具中运行小程序了。