<view class="history-container">
  <view class="header">
    <text class="title">会话历史</text>
    <view class="header-actions">
      <button class="clear-btn" bindtap="clearAllConversations" wx:if="{{conversations.length > 0}}">
        清空
      </button>
      <button class="back-btn" bindtap="goBack">返回</button>
    </view>
  </view>

  <view wx:if="{{conversations.length === 0}}" class="empty-state">
    <text class="empty-text">暂无会话历史</text>
    <text class="empty-desc">开始新的对话来创建会话记录</text>
  </view>

  <view wx:else class="conversations-list">
    <view wx:for="{{conversations}}" wx:key="id" class="conversation-item" 
          bindtap="selectConversation" data-id="{{item.id}}">
      <view class="conversation-content">
        <view class="conversation-title">{{item.title}}</view>
        <view class="conversation-meta">
          <text class="conversation-time">{{item.updatedAt}}</text>
          <text class="conversation-count">{{item.messages ? item.messages.length : 0}}条消息</text>
        </view>
        <view wx:if="{{item.messages && item.messages.length > 0}}" class="conversation-preview">
          {{item.messages[0].content}}
        </view>
      </view>
      <view class="conversation-actions">
        <button class="delete-btn" bindtap="deleteConversation" data-id="{{item.id}}" catchtap="true">
          删除
        </button>
      </view>
    </view>
  </view>
</view>
